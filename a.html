<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bingo A</title>
<style>
body{font-family:Arial;text-align:center}
.grid{display:grid;grid-template-columns:repeat(5,60px);gap:5px;justify-content:center}
.cell{width:60px;height:60px;line-height:60px;border:1px solid #000}
.A{background:#1e90ff;color:white}
.B{background:#2ecc71;color:white}
</style>
</head>

<body>

<h2>ðŸ”µ Player A</h2>
<div id="turn"></div>
<div class="grid" id="board"></div>

<input id="num" type="number" min="1" max="25">
<button onclick="call()">Call</button>

<h3>Numbers Called:</h3>
<div id="log"></div>

<script type="module">
import {initializeApp} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {getDatabase,ref,push,set,onValue,onChildAdded} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const ROOM="room1"; // change if new match

const config={
 apiKey:"AIzaSyCdcOpVzbZwKkbiSTHfsbYIecRuDbq9uns",
 databaseURL:"https://bingo-sgthegreat-default-rtdb.firebaseio.com",
 projectId:"bingo-sgthegreat"
};

const app=initializeApp(config);
const db=getDatabase(app);

const base="rooms/"+ROOM+"/";
const turnRef=ref(db,base+"turn");
const callsRef=ref(db,base+"calls");

let called={};

let nums=Array.from({length:25},(_,i)=>i+1).sort(()=>Math.random()-0.5);

nums.forEach(n=>{
 let d=document.createElement("div");
 d.className="cell";
 d.id="c"+n;
 d.innerText=n;
 board.appendChild(d);
});

onValue(turnRef,s=>{
 turn.innerText=s.val()==="A"?"âœ… Your Turn":"â³ Wait B";
});

window.call=function(){
 onValue(turnRef,s=>{
  if(s.val()!=="A") return alert("Wait turn");

  let n=num.value;
  if(!n||called[n]) return alert("Invalid");

  called[n]=1;
  push(callsRef,{num:n,by:"A"});
  set(turnRef,"B");
  num.value="";
 },{onlyOnce:true});
};

onChildAdded(callsRef,s=>{
 let {num,by}=s.val();
 log.innerText+=" "+num;
 document.getElementById("c"+num)?.classList.add(by);
});
</script>

</body>
</html>
